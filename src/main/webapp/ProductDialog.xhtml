<p:dialog xmlns="http://www.w3.org/1999/xhtml"
          xmlns:h="http://xmlns.jcp.org/jsf/html"
          xmlns:f="http://xmlns.jcp.org/jsf/core"
          xmlns:p="http://primefaces.org/ui"
          id="product-dialog"
          header="Informationen" 
          showEffect="fade" 
          modal="true" 
          resizable="false" 
          appendTo="@(body)" 
          widgetVar="pD"
          responsive="true" >
    <h:form id="form-product-dialog">
        <p:growl id="GROWL" showDetail="true" life="4000" />
        <p:panel id="panel"
                 style="width: 650px; margin: 0 auto;">
            <p:panelGrid id="product-dialog-content" 
                         columns="2"
                         layout="grid" >
                <h:outputText value="Id:" />
                <h:outputLabel id="ID" 
                               value="#{productDialogBean.header}"
                               style="width: 100%" />
                <h:outputText value="Name:" />
                <p:inputText id="NAME" 
                             value="#{productDialogBean.currentProduct.name}"
                             disabled="#{!productDialogBean.editing}"
                             style="width: 100%" >
                    <p:ajax event="change"
                            process="@this" />
                </p:inputText>
                <h:outputText value="Beschreibung:" />
                <p:inputTextarea rows="5"
                                 cols="30"
                                 id="DESCRIPTION" 
                                 value="#{productDialogBean.currentProduct.description}"
                                 disabled="#{!productDialogBean.editing}"
                                 style="width: 100%" >
                    <p:ajax event="change"
                            process="@this" />
                </p:inputTextarea>
                <h:outputText value="Kategorie:" />
                <p:selectOneMenu id="CATEGORY"
                                 value="#{productDialogBean.currentProduct.category}" 
                                 valueChangeListener="#{productDialogBean.getCategory}"
                                 disabled="#{!productDialogBean.editing}"
                                 converter="productCategoryConverter"
                                 hideNoSelectionOption="true"
                                 style="width: 100%" >
                    <f:selectItem 
                        itemLabel="#{productDialogBean.currentProduct.category.name}" 
                        itemValue="#{productDialogBean.currentProduct.category}" 
                        noSelectionOption="true" />
                    <f:selectItems 
                        value="#{productDialogBean.category_list}" 
                        var="category" 
                        itemLabel="#{category.name}" 
                        itemValue="#{category}"/>
                    <p:ajax event="change"
                            process="@this" 
                            update="GROWL"/>
                </p:selectOneMenu>
                <h:outputText value="Abrechnungsart:" />
                <p:selectOneMenu id="BILLINGTYPE"
                                 value="#{productDialogBean.currentProduct.billingType.name}" 
                                 valueChangeListener="#{productDialogBean.getBillingType}"
                                 disabled="#{!productDialogBean.editing}"
                                 hideNoSelectionOption="true"
                                 style="width: 100%" >
                    <f:selectItem 
                        itemLabel="#{productDialogBean.currentProduct.billingType.name}" 
                        itemValue="#{productDialogBean.currentProduct.billingType.name}" 
                        noSelectionOption="true"/>
                    <f:selectItems 
                        value="#{productDialogBean.billingType_list}" 
                        var="billingType" 
                        itemLabel="#{billingType.name}" 
                        itemValue="#{billingType.name}"/>
                    <p:ajax 
                        process="@this" 
                        update="GROWL"/>
                </p:selectOneMenu>
                <h:outputText value="Preis:" />
                <p:inputText id="PRICE" 
                             value="#{productDialogBean.currentProduct.price}"
                             disabled="#{!productDialogBean.editing}" 
                             style="width: 100%" >
                    <p:ajax event="change"
                            process="@this" />
                </p:inputText>
                <h:outputText value="Menge:" />
                <p:inputNumber id="AMOUNT" 
                               value="#{productDialogBean.currentProduct.amount}"
                               disabled="#{!productDialogBean.editing}"
                               style="width: 100%" >
                    <p:ajax event="change"
                            process="@this" />
                </p:inputNumber>
                <h:outputText value="Lagerstatus:" />
                <p:selectOneMenu id="STORAGESTATUS"
                                 value="#{productDialogBean.currentProduct.storageStatus}" 
                                 valueChangeListener="#{productDialogBean.getStorageStatus}"
                                 disabled="#{!productDialogBean.editing}"
                                 converter="storageStatusConverter"
                                 hideNoSelectionOption="true"
                                 style="width: 100%" >
                    <f:selectItem 
                        itemLabel="#{productDialogBean.currentProduct.storageStatus.name}" 
                        itemValue="#{productDialogBean.currentProduct.storageStatus}" 
                        noSelectionOption="true"/>
                    <f:selectItems 
                        value="#{productDialogBean.storageStatus_list}" 
                        var="storageStatus" 
                        itemLabel="#{storageStatus.name}" 
                        itemValue="#{storageStatus}"/>
                    <p:ajax event="change"
                            process="@this" 
                            update="GROWL"/>
                </p:selectOneMenu>
            </p:panelGrid>
            <p:panelGrid columns="1">
                <p:commandButton id="SAVE"
                                 action="#{productDialogBean.saveEdits()}"
                                 value="Speichern"
                                 update="form-product-dialog form-product-view:data-view"
                                 onclick="PF('pD').hide()"
                                 rendered="#{productDialogBean.editing}"
                                 style="float: right;">
                </p:commandButton>
            </p:panelGrid>
        </p:panel>
    </h:form>
</p:dialog>